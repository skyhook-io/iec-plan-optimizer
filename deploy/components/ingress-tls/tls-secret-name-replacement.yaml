# Kustomize replacement: Injects INGRESS_TLS_SECRET_NAME from configmap into Ingress spec.tls.secretName at build time.
# Replaces TLS_SECRET_NAME_PLACEHOLDER with the actual secret name per environment.
source:
  kind: ConfigMap
  name: iec-plan-optimizer-environment-values
  fieldPath: data.INGRESS_TLS_SECRET_NAME
targets:
- select:
    kind: Ingress
    name: iec-plan-optimizer
  fieldPaths:
    - spec.tls.[secretName=TLS_SECRET_NAME_PLACEHOLDER].secretName
  options:
    create: true
